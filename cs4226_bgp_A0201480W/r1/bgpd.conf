! bgpd configuration file for router r1
! This file is automatically generated

hostname r1
password zpassword
enable password epassword

log file /home/sdn/bgp_cases/cs4226_bgp_A0201480W/r1/bgpd.log

router bgp 100
 bgp router-id 10.0.1.10

 !These are the networks we announce; configured here to be ALL directly connected networks
 network 10.0.1.0/24
 network 5.5.5.0/24
 network 1.1.1.0/24
 redistribute rip

 !These are the neighbors with which we estabish BGP sessions:
 neighbor 5.5.5.1 remote-as 500
 neighbor 10.0.2.1 remote-as 100
 neighbor 1.1.1.2 remote-as 300 
 neighbor 1.1.1.2 route-map setmetricout out
 neighbor 1.1.1.2 route-map Peer-R3 in

route-map setmetricout permit 10
 set metric 0


ip community-list 1 permit 100:300
ip community-list 2 permit 100:200
!
route-map Peer-R3 permit 10
 match community 1
 set local-preference 300
!
route-map Peer-R3 permit 20
 match community 2
 set local-preference 200
!
route-map Peer-R3 permit 30



